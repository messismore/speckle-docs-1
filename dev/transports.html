<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transports | Speckle Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="/scripts/scroll-to-hash.js"></script>
    <meta name="description" content="Documentation on everything Speckle">
    <meta name="theme-color" content="#0480FB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.df7ac8e6.css" as="style"><link rel="preload" href="/assets/js/app.15b1a046.js" as="script"><link rel="preload" href="/assets/js/4.567b9940.js" as="script"><link rel="preload" href="/assets/js/48.5619386e.js" as="script"><link rel="prefetch" href="/assets/js/10.2a8b961c.js"><link rel="prefetch" href="/assets/js/11.2f3363f8.js"><link rel="prefetch" href="/assets/js/12.eece226d.js"><link rel="prefetch" href="/assets/js/13.7b773d84.js"><link rel="prefetch" href="/assets/js/14.9b02446f.js"><link rel="prefetch" href="/assets/js/15.2c81b464.js"><link rel="prefetch" href="/assets/js/16.6f19608e.js"><link rel="prefetch" href="/assets/js/17.098a0d2e.js"><link rel="prefetch" href="/assets/js/18.d5320de9.js"><link rel="prefetch" href="/assets/js/19.5df3fbc9.js"><link rel="prefetch" href="/assets/js/20.68f3c5c3.js"><link rel="prefetch" href="/assets/js/21.28d122b9.js"><link rel="prefetch" href="/assets/js/22.b01a2f02.js"><link rel="prefetch" href="/assets/js/23.f7d13583.js"><link rel="prefetch" href="/assets/js/24.56b24298.js"><link rel="prefetch" href="/assets/js/25.e3ea41a3.js"><link rel="prefetch" href="/assets/js/26.6acbff2c.js"><link rel="prefetch" href="/assets/js/27.89b65790.js"><link rel="prefetch" href="/assets/js/28.ff6d0a43.js"><link rel="prefetch" href="/assets/js/29.d2ec71a2.js"><link rel="prefetch" href="/assets/js/3.c2e0db25.js"><link rel="prefetch" href="/assets/js/30.49fb67b7.js"><link rel="prefetch" href="/assets/js/31.2e7ae3ec.js"><link rel="prefetch" href="/assets/js/32.25ca9c74.js"><link rel="prefetch" href="/assets/js/33.3269096f.js"><link rel="prefetch" href="/assets/js/34.3b608ae6.js"><link rel="prefetch" href="/assets/js/35.360f8445.js"><link rel="prefetch" href="/assets/js/36.b9126dc1.js"><link rel="prefetch" href="/assets/js/37.fe921f09.js"><link rel="prefetch" href="/assets/js/38.af20299a.js"><link rel="prefetch" href="/assets/js/39.d0644e5c.js"><link rel="prefetch" href="/assets/js/40.f4c366ec.js"><link rel="prefetch" href="/assets/js/41.f82752a7.js"><link rel="prefetch" href="/assets/js/42.ce8d4c02.js"><link rel="prefetch" href="/assets/js/43.2f1ee881.js"><link rel="prefetch" href="/assets/js/44.4d84d8a7.js"><link rel="prefetch" href="/assets/js/45.03075f5d.js"><link rel="prefetch" href="/assets/js/46.3665d014.js"><link rel="prefetch" href="/assets/js/47.33c51211.js"><link rel="prefetch" href="/assets/js/49.54f5a3ca.js"><link rel="prefetch" href="/assets/js/5.f76427e8.js"><link rel="prefetch" href="/assets/js/50.ed8225ec.js"><link rel="prefetch" href="/assets/js/51.5d5eeeb9.js"><link rel="prefetch" href="/assets/js/52.db0fd992.js"><link rel="prefetch" href="/assets/js/53.2a4abaf4.js"><link rel="prefetch" href="/assets/js/54.7ea59ef1.js"><link rel="prefetch" href="/assets/js/55.c4888619.js"><link rel="prefetch" href="/assets/js/56.bf3607b7.js"><link rel="prefetch" href="/assets/js/57.73978b4f.js"><link rel="prefetch" href="/assets/js/58.ef13f629.js"><link rel="prefetch" href="/assets/js/6.55eba258.js"><link rel="prefetch" href="/assets/js/7.3e50a1e7.js"><link rel="prefetch" href="/assets/js/8.c67a3aff.js"><link rel="prefetch" href="/assets/js/9.ee0b3844.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.674e6a95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.df7ac8e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo-docs.png" alt="Speckle Docs" class="logo"> <span class="site-name can-hide">Speckle Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Started
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Started
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Developer Docs 👩‍💻</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/dev/architecture.html" class="sidebar-link">Architecture</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Core Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/base.html" class="sidebar-link">The Base Object</a></li><li><a href="/dev/decomposition.html" class="sidebar-link">Decomposition API</a></li><li><a href="/dev/kits.html" class="sidebar-link">Kits</a></li><li><a href="/dev/transports.html" aria-current="page" class="active sidebar-link">Transports</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/transports.html#preamble" class="sidebar-link">Preamble</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#definitions" class="sidebar-link">Definitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/transports.html#transports-2" class="sidebar-link">Transports</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#storage-layers" class="sidebar-link">Storage Layers</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev/transports.html#sending-data-serialisation-and-writing" class="sidebar-link">Sending Data: Serialisation and Writing</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#receiving-data-reading-and-deserialisation" class="sidebar-link">Receiving Data: Reading and Deserialisation</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#advanced-transports" class="sidebar-link">Advanced Transports</a></li><li class="sidebar-sub-header"><a href="/dev/transports.html#summary" class="sidebar-link">Summary</a></li></ul></li><li><a href="/dev/apps-auth.html" class="sidebar-link">Apps &amp; Auth</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced Concepts</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>.NET SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/dotnet.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/objects.html" class="sidebar-link">Objects Kit</a></li><li><a href="/dev/connectors-dev.html" class="sidebar-link">Writing Your Own connector</a></li><li><a href="/dev/kits-dev.html" class="sidebar-link">Writing Your Own Kit</a></li><li><a href="/dev/transports-dev.html" class="sidebar-link">Writing Your Own Transport</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/python.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/py-examples.html" class="sidebar-link">Examples</a></li><li><a href="/dev/py-sample.html" class="sidebar-link">Tutorial: Simple Dashboard</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/js.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/viewer.html" class="sidebar-link">Using our embeddable 3D viewer</a></li><li><a href="/dev/js-app-script.html" class="sidebar-link">Using Google Apps Scripts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Server API &amp; Apps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/server-api.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/server-graphql-api.html" class="sidebar-link">GraphQL API</a></li><li><a href="/dev/server-rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/dev/server-stream-previews.html" class="sidebar-link">Stream Preview Images</a></li><li><a href="/dev/server-webhooks.html" class="sidebar-link">Webhooks</a></li><li><a href="/dev/server-setup.html" class="sidebar-link">Deploying a Server - DigitalOcean Marketplace App</a></li><li><a href="/dev/server-manualsetup.html" class="sidebar-link">Deploying a Server - manual setup</a></li><li><a href="/dev/tokens.html" class="sidebar-link">Personal Access Tokens</a></li><li><a href="/dev/apps.html" class="sidebar-link">Creating Your Own App</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="transports"><a href="#transports" class="header-anchor">#</a> Transports</h1> <p>This post was originally part of the Making Speckle 2.0 series of posts on the community forum, it's been adapted as part of our dev docs. Check out <a href="https://speckle.community/t/core-2-0-transports/919" target="_blank" rel="noopener noreferrer">the original on our forum<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>!</p> <h2 id="preamble"><a href="#preamble" class="header-anchor">#</a> Preamble</h2> <p>This page covers what Transports are and do and the basic concepts behind them. <a href="/dev/transports-dev">Here can read how to write your own transport</a>. Please note that currently examples are only in C#, equivalent implementations are available in our other SDKs.</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>One of the most common use-cases we've encountered throughout the past 5 years of interacting with developers from the AEC space is &quot;dumping data somewhere&quot;, and, obviously, getting it back out again. While this can, of course, be done by using the Speckle server, some situations call for a different storage type or database.
We've seen people looking to use files on a network drive, Azure SQL provisions, MongoDB, Excel files, and sometimes <a href="https://en.wikipedia.org/wiki/Core_rope_memory" target="_blank" rel="noopener noreferrer">core rope memory<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (joking, we've never seen that one - yet!).</p> <p>An important part of our mission at Speckle is to empower developers across AEC. We want to give you a leg up so you can &quot;automate all the things&quot; and build powerful applications that leverage modern tech.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Transports give developers in the AEC space full control over where and how their data is stored.</p></div> <p>You can now switch, choose and mix various storage layers. This allows us to write better, more memory efficient and predictable connectors. It also allows you, as a developer, to use Speckle as a springboard in your development work in a much more flexible way.</p> <h2 id="definitions"><a href="#definitions" class="header-anchor">#</a> Definitions</h2> <p>Before we dive in and see how they work, let's get some definitions out of the way:</p> <h3 id="transports-2"><a href="#transports-2" class="header-anchor">#</a> Transports</h3> <p>In Speckle, transports take Speckle Objects from memory and persist it to a specific storage layer. Of course, they're also responsible for taking those objects out of the storage layer and back into memory.</p> <h3 id="storage-layers"><a href="#storage-layers" class="header-anchor">#</a> Storage Layers</h3> <p>The storage layer that a transport writes to can be, ultimately, anything you want it to be. The .NET SDK implements already a few of them, specifically:</p> <ul><li>an SQLite Transport</li> <li>an In-Memory Transport</li> <li><strong>a Speckle Server 2.0 Transport</strong></li> <li>a Disk Transport</li> <li>a MongoDB Transport</li></ul> <p>Other possible targets for transports can be S3 storage, a network drive, etc. You can also write a transport that writes to more than one place, but we advise against it - the .NET SDK provides a better way to achieve the same thing.</p> <p>Moreover, in the case of disk based transports (ie, disk, sqlite, etc.) you can also <strong>control the location</strong> of where this data is stored.</p> <h2 id="sending-data-serialisation-and-writing"><a href="#sending-data-serialisation-and-writing" class="header-anchor">#</a> Sending Data: Serialisation and Writing</h2> <p>Serialisation is a potentially quite wasteful operation depending on the size of the data. One of our goals is to be able to support arbitrarily large models without adding too much overhead.</p> <blockquote><p>Why can serialisation be wasteful, especially in terms of memory usage? Imagine you have a model with 100k building objects (geometry &amp; data) open in an application. To send that model to Speckle, we would need to (1) convert those objects into Speckle objects, using a given converter, then (2) serialise them to whatever format we'd be ingesting down the line (e.g., a JSON string), and, finally, (3) transport them to Speckle. Over the course of these steps, your computer's memory holds <strong><em>three</em></strong> representations of the same object - Native, Speckle, and String. Not that cool! To reduce memory overhead, Speckle now integrates serialisation with writing objects to one or more persistence layers via transports. Whenever an object finishes serialisation, it's sent to a transport for storage, and ultimately, its string representation gets &quot;garbage collected&quot;. Just like this, we've knocked off some memory usage.</p></blockquote> <p>The 2.0 API exposes two lower level methods for sending (serialising and writing) and receiving (reading and deserialising) data. In this section, we'll look at only at the send one - the section below will provide more detail on receiving data.</p> <p>First off, let's start with the simplest, default, use case:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">// First, let's create a simple base object to store our building data in.</span>
<span class="token class-name"><span class="token keyword">var</span></span> myData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myData<span class="token punctuation">[</span><span class="token string">&quot;@columns&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Columns<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> the columns <span class="token punctuation">}</span><span class="token punctuation">;</span>
myData<span class="token punctuation">[</span><span class="token string">&quot;@rooms&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Rooms<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> the rooms<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Let's now send the data:</span>
<span class="token class-name"><span class="token keyword">var</span></span> myDataId <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span> myData <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Looks quite simple! In this scenario, the <code>Send</code> method serialised and saved the <code>myData</code> object, together with all its detachable <code>columns</code> and <code>rooms</code> to the default Speckle local transport (an SQLite db stored in <code>~/AppData/Speckle</code>), and returned the id (hash) of the <code>myData</code> object, which you can use to receive it back again.</p> <p>Let's look at a more advanced example:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> myRevisionId <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>
	myData<span class="token punctuation">,</span>
	<span class="token named-parameter punctuation">transports</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ITransport<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
	  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerTransport</span><span class="token punctuation">(</span> args <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// imagine this one server...</span>
	  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerTransport</span><span class="token punctuation">(</span> args <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// ... and this is a different one! you're basically pushing to multiple remotes!</span>
	  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCustomTransport</span><span class="token punctuation">(</span> args <span class="token punctuation">)</span> <span class="token comment">// ... and, why not another transport?</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>What's happening here is that we're passing in multiple transports to the Send method. Speckle will persist the given object, with all its detachable sub-children, to all these transports, and, when done, return the object's id (hash!).</p> <h2 id="receiving-data-reading-and-deserialisation"><a href="#receiving-data-reading-and-deserialisation" class="header-anchor">#</a> Receiving Data: Reading and Deserialisation</h2> <p>Again, let's start with the simplest use-case possible:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">// To set the stage, in the previous code sample, we've done:</span>
<span class="token class-name"><span class="token keyword">var</span></span> myDataId <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span> myData <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Now, we want to get it back out. It's as simple as:</span>
<span class="token class-name"><span class="token keyword">var</span></span> myData <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Receive</span><span class="token punctuation">(</span> myDataId <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>This just retrieves the object back using the default SQLite Transport. No accounts, no extra HTTP requests, no hassle. Of course, this is enough only for &quot;local&quot; operations that are bound to a single computer only.</p> <p>If you want this to work across a local network, you can always create a SQLite Transport (or your own custom transport for that matter) that stores data on a network accessible drive. For large collaborative environments, you can, of course, receive your data from a Speckle Server.</p> <p>While you can Send data to multiple places at the same time, you can't really receive data from more places at the same time. Hence, <code>Receive</code> can only accept one transport as the source:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> myData <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Receive</span><span class="token punctuation">(</span>
	myDataId<span class="token punctuation">,</span>
	<span class="token named-parameter punctuation">remoteTransport</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerTransport</span><span class="token punctuation">(</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">)</span> <span class="token comment">// where you want to receive things from!</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Done! <code>myData</code> is now your data - a nicely deserialised Base object.</p> <h2 id="advanced-transports"><a href="#advanced-transports" class="header-anchor">#</a> Advanced Transports</h2> <p>The Send and Receive functions in the examples above assume <strong>a shared global cache</strong> located in <code>~/User/.config/Speckle</code>. In the case of Send, this means that objects will be written to a SQLite Transport that is used by Speckle always; in the case of Receive, the same SQLite Transport will be used to buffer to/from the remote transport.</p> <p>Nevertheless, there are some use cases where you don't want to, or cannot, use the shared global cache. For example, you would want to go full on classic version control, and store your history right next to your project's file:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>`-- MyProject_A            # root folder
    |-- .speckle           # the &quot;.git&quot; folder
    |   |-- references.db  # commits, branches, tags, etc. storage
    |   `-- objects.db     # object storage
    `-- MyProject_A.rvt    # source file
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>How would you actually implement such a system?</p> <p>First, you can always customise the location of your transport. For example, in the case of the SQLite Transport, you can specify a folder where to actually create it. Let's assume we want to send our data to only two transports, a local SQLite one that's sitting in the <code>.speckle</code> folder just next to our Revit file, and a Speckle Server.</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> customLocalTransport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SQLiteTransport</span><span class="token punctuation">(</span> <span class="token named-parameter punctuation">basePath</span><span class="token punctuation">:</span> <span class="token string">@&quot;{localFolderPath}/.speckle&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> serverTransport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServerTransport</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The <code>Send</code> method can take an optional <code>useDefaultCache: false</code> argument to bypass the global cache, and send exclusively to the provided transports:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> myDataId <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span>
  myData<span class="token punctuation">,</span>
  <span class="token named-parameter punctuation">transports</span><span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ITransport<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> customLocalTransport<span class="token punctuation">,</span> serverTransport <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token named-parameter punctuation">useDefaultCache</span><span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// will bypass the global cache!</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>When receiving data, if you want to use your custom local transport, the method would look like this:</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> myData <span class="token operator">=</span> <span class="token keyword">await</span> Operations<span class="token punctuation">.</span><span class="token function">Receive</span><span class="token punctuation">(</span>
  <span class="token named-parameter punctuation">objectId</span><span class="token punctuation">:</span> myDataId<span class="token punctuation">,</span>
  <span class="token named-parameter punctuation">remoteTransport</span><span class="token punctuation">:</span> serverTransport<span class="token punctuation">,</span>
  <span class="token named-parameter punctuation">localTransport</span><span class="token punctuation">:</span> customLocalTransport <span class="token comment">// will use this one instead of the global cache!</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Another use case is in constrained environments, where you don't have a persistent storage layer handy, such as a serverless function, or docker container. That's where you would probably want to use a <code>MemoryTransport</code> - it's obviously much faster and it doesn't need to touch the disk.</p> <h2 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h2> <p>Transports give you, as a developer, a lot of flexibility in how you can use Speckle, so hopefully &quot;automating all the things&quot; will become a bit easier and nicer. They make it easy to customise your workflows and where and how you store data - from the Speckle Server, to one or more databases, local or remote.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/specklesystems/speckle-docs/edit/main/dev/transports.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/16/2021, 11:18:11 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev/kits.html" class="prev">
        Kits
      </a></span> <span class="next"><a href="/dev/apps-auth.html">
        Apps &amp; Auth
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.15b1a046.js" defer></script><script src="/assets/js/4.567b9940.js" defer></script><script src="/assets/js/48.5619386e.js" defer></script>
  </body>
</html>
