<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Examples | Speckle Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="/scripts/scroll-to-hash.js"></script>
    <meta name="description" content="Documentation on everything Speckle">
    <meta name="theme-color" content="#0480FB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.df7ac8e6.css" as="style"><link rel="preload" href="/assets/js/app.15b1a046.js" as="script"><link rel="preload" href="/assets/js/4.567b9940.js" as="script"><link rel="preload" href="/assets/js/39.d0644e5c.js" as="script"><link rel="prefetch" href="/assets/js/10.2a8b961c.js"><link rel="prefetch" href="/assets/js/11.2f3363f8.js"><link rel="prefetch" href="/assets/js/12.eece226d.js"><link rel="prefetch" href="/assets/js/13.7b773d84.js"><link rel="prefetch" href="/assets/js/14.9b02446f.js"><link rel="prefetch" href="/assets/js/15.2c81b464.js"><link rel="prefetch" href="/assets/js/16.6f19608e.js"><link rel="prefetch" href="/assets/js/17.098a0d2e.js"><link rel="prefetch" href="/assets/js/18.d5320de9.js"><link rel="prefetch" href="/assets/js/19.5df3fbc9.js"><link rel="prefetch" href="/assets/js/20.68f3c5c3.js"><link rel="prefetch" href="/assets/js/21.28d122b9.js"><link rel="prefetch" href="/assets/js/22.b01a2f02.js"><link rel="prefetch" href="/assets/js/23.f7d13583.js"><link rel="prefetch" href="/assets/js/24.56b24298.js"><link rel="prefetch" href="/assets/js/25.e3ea41a3.js"><link rel="prefetch" href="/assets/js/26.6acbff2c.js"><link rel="prefetch" href="/assets/js/27.89b65790.js"><link rel="prefetch" href="/assets/js/28.ff6d0a43.js"><link rel="prefetch" href="/assets/js/29.d2ec71a2.js"><link rel="prefetch" href="/assets/js/3.c2e0db25.js"><link rel="prefetch" href="/assets/js/30.49fb67b7.js"><link rel="prefetch" href="/assets/js/31.2e7ae3ec.js"><link rel="prefetch" href="/assets/js/32.25ca9c74.js"><link rel="prefetch" href="/assets/js/33.3269096f.js"><link rel="prefetch" href="/assets/js/34.3b608ae6.js"><link rel="prefetch" href="/assets/js/35.360f8445.js"><link rel="prefetch" href="/assets/js/36.b9126dc1.js"><link rel="prefetch" href="/assets/js/37.fe921f09.js"><link rel="prefetch" href="/assets/js/38.af20299a.js"><link rel="prefetch" href="/assets/js/40.f4c366ec.js"><link rel="prefetch" href="/assets/js/41.f82752a7.js"><link rel="prefetch" href="/assets/js/42.ce8d4c02.js"><link rel="prefetch" href="/assets/js/43.2f1ee881.js"><link rel="prefetch" href="/assets/js/44.4d84d8a7.js"><link rel="prefetch" href="/assets/js/45.03075f5d.js"><link rel="prefetch" href="/assets/js/46.3665d014.js"><link rel="prefetch" href="/assets/js/47.33c51211.js"><link rel="prefetch" href="/assets/js/48.5619386e.js"><link rel="prefetch" href="/assets/js/49.54f5a3ca.js"><link rel="prefetch" href="/assets/js/5.f76427e8.js"><link rel="prefetch" href="/assets/js/50.ed8225ec.js"><link rel="prefetch" href="/assets/js/51.5d5eeeb9.js"><link rel="prefetch" href="/assets/js/52.db0fd992.js"><link rel="prefetch" href="/assets/js/53.2a4abaf4.js"><link rel="prefetch" href="/assets/js/54.7ea59ef1.js"><link rel="prefetch" href="/assets/js/55.c4888619.js"><link rel="prefetch" href="/assets/js/56.bf3607b7.js"><link rel="prefetch" href="/assets/js/57.73978b4f.js"><link rel="prefetch" href="/assets/js/58.ef13f629.js"><link rel="prefetch" href="/assets/js/6.55eba258.js"><link rel="prefetch" href="/assets/js/7.3e50a1e7.js"><link rel="prefetch" href="/assets/js/8.c67a3aff.js"><link rel="prefetch" href="/assets/js/9.ee0b3844.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.674e6a95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.df7ac8e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo-docs.png" alt="Speckle Docs" class="logo"> <span class="site-name can-hide">Speckle Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Started
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/dev/" class="nav-link router-link-active">
  Developer Docs
</a></div><div class="nav-item"><a href="https://speckle.systems" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Speckle Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://speckle.systems/getstarted/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Get Started
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/specklesystems/speckle-docs/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Developer Docs 👩‍💻</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/dev/architecture.html" class="sidebar-link">Architecture</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Core Concepts</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/base.html" class="sidebar-link">The Base Object</a></li><li><a href="/dev/decomposition.html" class="sidebar-link">Decomposition API</a></li><li><a href="/dev/kits.html" class="sidebar-link">Kits</a></li><li><a href="/dev/transports.html" class="sidebar-link">Transports</a></li><li><a href="/dev/apps-auth.html" class="sidebar-link">Apps &amp; Auth</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced Concepts</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>.NET SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/dotnet.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/objects.html" class="sidebar-link">Objects Kit</a></li><li><a href="/dev/connectors-dev.html" class="sidebar-link">Writing Your Own connector</a></li><li><a href="/dev/kits-dev.html" class="sidebar-link">Writing Your Own Kit</a></li><li><a href="/dev/transports-dev.html" class="sidebar-link">Writing Your Own Transport</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/python.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/py-examples.html" aria-current="page" class="active sidebar-link">Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/py-examples.html#sending-receiving" class="sidebar-link">Sending &amp; Receiving</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/py-examples.html#short-hand-the-stream-wrapper" class="sidebar-link">Short Hand: The Stream Wrapper</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev/py-examples.html#overview-of-functionality" class="sidebar-link">Overview of Functionality</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev/py-examples.html#graphql-client" class="sidebar-link">GraphQL Client</a></li><li class="sidebar-sub-header"><a href="/dev/py-examples.html#operations-and-transports" class="sidebar-link">Operations and Transports</a></li><li class="sidebar-sub-header"><a href="/dev/py-examples.html#base-object-serialization" class="sidebar-link">Base Object &amp; Serialization</a></li></ul></li></ul></li><li><a href="/dev/py-sample.html" class="sidebar-link">Tutorial: Simple Dashboard</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript SDK</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/js.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/viewer.html" class="sidebar-link">Using our embeddable 3D viewer</a></li><li><a href="/dev/js-app-script.html" class="sidebar-link">Using Google Apps Scripts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Server API &amp; Apps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev/server-api.html" class="sidebar-link">Introduction</a></li><li><a href="/dev/server-graphql-api.html" class="sidebar-link">GraphQL API</a></li><li><a href="/dev/server-rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/dev/server-stream-previews.html" class="sidebar-link">Stream Preview Images</a></li><li><a href="/dev/server-webhooks.html" class="sidebar-link">Webhooks</a></li><li><a href="/dev/server-setup.html" class="sidebar-link">Deploying a Server - DigitalOcean Marketplace App</a></li><li><a href="/dev/server-manualsetup.html" class="sidebar-link">Deploying a Server - manual setup</a></li><li><a href="/dev/tokens.html" class="sidebar-link">Personal Access Tokens</a></li><li><a href="/dev/apps.html" class="sidebar-link">Creating Your Own App</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h1> <p>This doc will show you the basics of how to send and receive data and give you an overview of the functionality with in SpecklePy. However, it is not comprehensive. Feel free to explore the repo's <a href="https://github.com/specklesystems/speckle-py/tree/main/tests" target="_blank" rel="noopener noreferrer">tests<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for even more examples.</p> <h2 id="sending-receiving"><a href="#sending-receiving" class="header-anchor">#</a> Sending &amp; Receiving</h2> <p>Let's look at how to send an object to a stream on your server, then receive that object back.</p> <p>First, you'll need to create and authenticate a client. To use the client, you'll need access to a Speckle server. To authenticate the client, you'll either need local accounts (added using <a href="/user/manager">Manager</a>) or you can go to <code>your-server.com/profile</code> and create a Personal Access Token.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api<span class="token punctuation">.</span>client <span class="token keyword">import</span> SpeckleClient
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api<span class="token punctuation">.</span>credentials <span class="token keyword">import</span> get_default_account

<span class="token comment"># initialise the client</span>
client <span class="token operator">=</span> SpeckleClient<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;your-server.com&quot;</span><span class="token punctuation">)</span> <span class="token comment"># or whatever your host is</span>
<span class="token comment"># client = SpeckleClient(host=&quot;localhost:3000&quot;, use_ssl=False) or use local server</span>

<span class="token comment"># authenticate the client with a token</span>
account <span class="token operator">=</span> get_default_account<span class="token punctuation">(</span><span class="token punctuation">)</span>
client<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span>token<span class="token operator">=</span>account<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Now that you have an authenticated client, you can start interacting with the API. Let's create a new stream and get that stream back.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># create a new stream. this returns the stream id</span>
new_stream_id <span class="token operator">=</span> client<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;a shiny new stream&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># use that stream id to get the stream from the server</span>
new_stream <span class="token operator">=</span> client<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>new_stream_id<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Next, we'll need some data to send. To make it more interesting, let's extend <code>Base</code> to create a simple block. All your custom objects should inherit from <code>Base</code> to ensure serialisation will work as expected.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>geometry <span class="token keyword">import</span> Point

<span class="token keyword">class</span> <span class="token class-name">Block</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
    length<span class="token punctuation">:</span> <span class="token builtin">float</span>
    width<span class="token punctuation">:</span> <span class="token builtin">float</span>
    height<span class="token punctuation">:</span> <span class="token builtin">float</span>
    origin<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> length<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">,</span> origin<span class="token operator">=</span>Point<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        <span class="token comment"># mark the origin as a detachable attribute</span>
        self<span class="token punctuation">.</span>add_detachable_attrs<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;origin&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>length <span class="token operator">=</span> length
        self<span class="token punctuation">.</span>width <span class="token operator">=</span> width
        self<span class="token punctuation">.</span>height <span class="token operator">=</span> height
        self<span class="token punctuation">.</span>origin <span class="token operator">=</span> origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Now let's send a block to the server! To do this, you'll first need to send the object to the stream and get back the object id or hash. You can then use this to create a commit on the stream that references this object.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>server <span class="token keyword">import</span> ServerTransport
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api <span class="token keyword">import</span> operations

<span class="token comment"># here's the data you want to send</span>
block <span class="token operator">=</span> Block<span class="token punctuation">(</span>length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment"># next create a server transport - this is the vehicle through which you will send and receive</span>
transport <span class="token operator">=</span> ServerTransport<span class="token punctuation">(</span>client<span class="token operator">=</span>client<span class="token punctuation">,</span> stream_id<span class="token operator">=</span>new_stream_id<span class="token punctuation">)</span>

<span class="token comment"># this serialises the block and sends it to the transport</span>
<span class="token builtin">hash</span> <span class="token operator">=</span> operations<span class="token punctuation">.</span>send<span class="token punctuation">(</span>base<span class="token operator">=</span>block<span class="token punctuation">,</span> transports<span class="token operator">=</span><span class="token punctuation">[</span>transport<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># you can now create a commit on your stream with this object</span>
commid_id <span class="token operator">=</span> client<span class="token punctuation">.</span>commit<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
    stream_id<span class="token operator">=</span>new_stream_id<span class="token punctuation">,</span> 
    obj_id<span class="token operator">=</span><span class="token builtin">hash</span><span class="token punctuation">,</span> 
    message<span class="token operator">=</span><span class="token string">&quot;this is a block I made in speckle-py&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Tada! You should now have a commit on your stream containing your block. You'll be able to see the commit on the stream page on the web. Receiving an object back is pretty similar to receiving it. You'll generally be using the client to get a commit, then getting the hash to receive from the <code>referencedObject</code> attribute on that commit.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># this receives the object back from the transport.</span>
<span class="token comment"># the received data will be deserialised back into a `Block` </span>
received_base <span class="token operator">=</span> operations<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>obj_id<span class="token operator">=</span><span class="token builtin">hash</span><span class="token punctuation">,</span> remote_transport<span class="token operator">=</span>transport<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="short-hand-the-stream-wrapper"><a href="#short-hand-the-stream-wrapper" class="header-anchor">#</a> Short Hand: The Stream Wrapper</h3> <p>You've just seen how to simply send and receive objects using the <code>SpeckleClient</code> and a <code>ServerTransport</code>. Since v2.2.6, there is a handy helper you can use to get a client and a transport from a stream URL - the <code>StreamWrapper</code>!</p> <p>Any URL to a stream, a branch, a commit, an object, or your globals will we parsed by the <code>StreamWrapper</code>. If you have a local account for the stream you provided, you can get an authenticated client and transport using the helper methods:</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api<span class="token punctuation">.</span>credentials <span class="token keyword">import</span> StreamWrapper

<span class="token comment"># provide any stream, branch, commit, object, or globals url</span>
wrapper <span class="token operator">=</span> StreamWrapper<span class="token punctuation">(</span><span class="token string">&quot;https://speckle.xyz/streams/3073b96e86/commits/604bea8cc6&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># get an authenticated SpeckleClient if you have a local account for the server</span>
client <span class="token operator">=</span> wrapper<span class="token punctuation">.</span>get_client<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># get an authenticated ServerTransport if you have a local account for the server</span>
transport <span class="token operator">=</span> wrapper<span class="token punctuation">.</span>get_transport<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="overview-of-functionality"><a href="#overview-of-functionality" class="header-anchor">#</a> Overview of Functionality</h2> <h3 id="graphql-client"><a href="#graphql-client" class="header-anchor">#</a> GraphQL Client</h3> <p>The <code>SpeckleClient</code> is the entry point for interacting with the GraphQL API. You'll need to have access to a speckle server to use this. To authenticate, you'll need a token. You can either get one from an account you've already added to your computer using the <a href="/user/manager">Manager</a> or you can head to <code>your-server.com/profile</code> and create a Personal Access Token.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api<span class="token punctuation">.</span>client <span class="token keyword">import</span> SpeckleClient
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api<span class="token punctuation">.</span>credentials <span class="token keyword">import</span> get_default_account<span class="token punctuation">,</span> get_local_accounts

all_accounts <span class="token operator">=</span> get_local_accounts<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># get back a list</span>
account <span class="token operator">=</span> get_default_account<span class="token punctuation">(</span><span class="token punctuation">)</span>

client <span class="token operator">=</span> SpeckleClient<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&quot;your-server.com&quot;</span><span class="token punctuation">)</span> <span class="token comment"># or whatever your host is</span>
<span class="token comment"># client = SpeckleClient(host=&quot;localhost:3000&quot;, use_ssl=False) or use local server</span>

client<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span>token<span class="token operator">=</span>account<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Interacting with streams is designed to be intuitive and evocative of SpecklePy 1.0</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># get a list of your most recent streams</span>
stream_list <span class="token operator">=</span> client<span class="token punctuation">.</span>stream<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># search your streams</span>
results <span class="token operator">=</span> client<span class="token punctuation">.</span>user<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">&quot;mech&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># create a stream</span>
new_stream_id <span class="token operator">=</span> client<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;a shiny new stream&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># get a stream</span>
new_stream <span class="token operator">=</span> client<span class="token punctuation">.</span>stream<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>new_stream_id<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>New in 2.0: branches and commits! Here are some basic interactions.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token comment"># get list of commits</span>
commits <span class="token operator">=</span> client<span class="token punctuation">.</span>commit<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># get a specific commit</span>
commit <span class="token operator">=</span> client<span class="token punctuation">.</span>commit<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;commit_id&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># create a commit</span>
commit_id <span class="token operator">=</span> client<span class="token punctuation">.</span>commit<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
    stream_id<span class="token operator">=</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">,</span> obj_id<span class="token operator">=</span><span class="token string">&quot;object_id&quot;</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">&quot;this is a commit message to describe the commit&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># delete a commit</span>
deleted <span class="token operator">=</span> client<span class="token punctuation">.</span>commit<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;commit_id&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># get a list of branches</span>
branches <span class="token operator">=</span> client<span class="token punctuation">.</span>branch<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># create a branch</span>
branch_id <span class="token operator">=</span> client<span class="token punctuation">.</span>branch<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;branch name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a description of the branch&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># get a specific branch</span>
branch <span class="token operator">=</span> client<span class="token punctuation">.</span>branch<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;stream_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;branch name&quot;</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="operations-and-transports"><a href="#operations-and-transports" class="header-anchor">#</a> Operations and Transports</h3> <p>The <code>operations</code> includes four main methods:</p> <ol><li><code>send</code>: send an object to a stream</li> <li><code>receive</code>: receive an object from a stream</li> <li><code>serialize</code>: serialise a given <code>Base</code> object</li> <li><code>deserialize</code>: deserializes json into an object into the type specified in <code>speckle_type</code> (defaults to a vanilla <code>Base</code> if the type can't be found)</li></ol> <p>Let's look at sending and receiving. You will need to provide a transport to indicate where the objects should be sent / received from. When sending, you can provide multiple transports to send the same object to multiple places simultaneously. At the moment, we have three transports: <code>SQLiteTransport</code>, <code>MemoryTransport</code>, and <code>ServerTransport</code>. If you'd like to learn more about Transports in Speckle 2.0, have a look <a href="/dev/transports">here</a>.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>memory <span class="token keyword">import</span> MemoryTransport
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>api <span class="token keyword">import</span> operations

transport <span class="token operator">=</span> MemoryTransport<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># this serialises the object and sends it to the transport</span>
<span class="token builtin">hash</span> <span class="token operator">=</span> operations<span class="token punctuation">.</span>send<span class="token punctuation">(</span>base<span class="token operator">=</span>base_obj<span class="token punctuation">,</span> transports<span class="token operator">=</span><span class="token punctuation">[</span>transport<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># if the object had detached objects, you can see these as well</span>
saved_objects <span class="token operator">=</span> transport<span class="token punctuation">.</span>objects <span class="token comment"># a dict with the obj hash as the key</span>

<span class="token comment"># this receives and object from the given transport, deserialises it,</span>
<span class="token comment"># and recomposes it into a base object.</span>
<span class="token comment"># you can optionally provide a local_transport which will default to</span>
<span class="token comment"># the `SQLiteTransport` pointing at your local cache</span>
received_base <span class="token operator">=</span> operations<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>obj_id<span class="token operator">=</span><span class="token builtin">hash</span><span class="token punctuation">,</span> remote_transport<span class="token operator">=</span>transport<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>You can also use the GraphQL API to send and receive objects. However, note that this method will not recompose a base and will only get the object you explicitly ask for using by its id.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base

<span class="token comment"># create a test base object</span>
test_base <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token punctuation">)</span>
test_base<span class="token punctuation">.</span>testing <span class="token operator">=</span> <span class="token string">&quot;a test base obj&quot;</span>

<span class="token comment"># run it through the serialiser</span>
s <span class="token operator">=</span> BaseObjectSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">hash</span><span class="token punctuation">,</span> obj <span class="token operator">=</span> s<span class="token punctuation">.</span>traverse_base<span class="token punctuation">(</span>test_base<span class="token punctuation">)</span>

<span class="token comment"># send it to the server</span>
objCreate <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token builtin">object</span><span class="token punctuation">.</span>create<span class="token punctuation">(</span>stream_id<span class="token operator">=</span><span class="token string">&quot;stream id&quot;</span><span class="token punctuation">,</span> objects<span class="token operator">=</span><span class="token punctuation">[</span>obj<span class="token punctuation">]</span><span class="token punctuation">)</span>

received_base <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token builtin">object</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;stream id&quot;</span><span class="token punctuation">,</span> <span class="token builtin">hash</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="base-object-serialization"><a href="#base-object-serialization" class="header-anchor">#</a> Base Object &amp; Serialization</h3> <h4 id="the-base-object"><a href="#the-base-object" class="header-anchor">#</a> The Base Object</h4> <p>The <code>Base</code> class is the one you're familiar with from the rest of the Speckle universe. It generally behaves the same way as it does in the other SDKs. For more info about the <code>Base</code> object, have a look <a href="/dev/base">here</a>.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base

<span class="token comment"># creating a base we will nest within a parent base</span>
detached_base <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token punctuation">)</span>
detached_base<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a detached base&quot;</span>

<span class="token comment"># creating our parent base object</span>
base_obj <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># attributes can be added using dot or dict notation</span>
base_obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;my base&quot;</span>
base_obj<span class="token punctuation">[</span><span class="token string">&quot;colour&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;lilac&quot;</span>

<span class="token comment"># other base objects can be nested within.</span>
<span class="token comment"># prepending the attribute name with `@` will detach the nested base when sending</span>
base_obj<span class="token punctuation">[</span><span class="token string">&quot;@nested&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> detached_base
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>The <code>Base</code> class has a few handy instance methods for identifying your object's typed and dynamic attributes:</p> <ul><li><code>get_typed_member_names()</code> gets all of the names of the defined (typed) attributes of the object</li> <li><code>get_dynamic_member_names()</code> gets all of the names of the dynamic attributes of the object</li> <li><code>get_member_names()</code> gets a list of all the attributes on the object, dynamic or not</li></ul> <p>Each <code>Base</code> object has an <code>id</code> (a unique hash) as it does in the other SDKs. This field is only populated if the <code>Base</code> has been previously serialised. If you really need the hash, you can get it using the <code>get_id()</code> method. Be aware that if the <code>id</code> is not populated, this call will fully serialise the object to create the <code>id</code>! By default, the hash will be generated without decomposing the object. However, you can pass <code>decompose=True</code> as an argument if you want the decomposed <code>id</code>.</p> <h4 id="subclassing-base"><a href="#subclassing-base" class="header-anchor">#</a> Subclassing Base</h4> <p>The <code>Base</code> class can be subclassed to create your own custom objects. These are automatically added to a a class level registry which is simply a dictionary with the type name as the key. The type is automatically populated by the <code>speckle_type</code> attribute, but can be overwritten when writing your class.</p> <p>Note that all typed attributes of a class <strong>must be initialised with a non-mutable default value</strong> or a value that you will only change by reassignment. If you'd like to have mutable defaults, you should write an <code>__init__</code> method for the class to set these (see the <code>Block</code> example in the first section).</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>point <span class="token keyword">import</span> Point

<span class="token keyword">class</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
    start<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>
    end<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>

<span class="token keyword">class</span> <span class="token class-name">AlternativeLine</span><span class="token punctuation">(</span>Base<span class="token punctuation">,</span> speckle_type<span class="token operator">=</span><span class="token string">&quot;Line_Two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    The `speckle_type` is automatically populated by the class name.
    You can override this behaviour as demonstrated here.
    &quot;&quot;&quot;</span>
    a<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>
    b<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>

<span class="token comment"># look, a new custom line!</span>
line <span class="token operator">=</span> Line<span class="token punctuation">(</span>end<span class="token operator">=</span>Point<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># adding dynamic attributes as normal</span>
line<span class="token punctuation">.</span>blah <span class="token operator">=</span> <span class="token string">&quot;blah&quot;</span>
line<span class="token punctuation">[</span><span class="token string">&quot;colour&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>You can also mark typed attributes as detachable or chunkable by updating the internal <code>_detachable</code> set or <code>_chunkable</code> dict with the provided helper methods.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base

<span class="token comment"># members that are chunked upon sending are stored in a dictionary</span>
<span class="token comment"># with the name as the key and the maximum chunk size as the value</span>
CHUNKABLE_PROPS <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;vertices&quot;</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token string">&quot;faces&quot;</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;colors&quot;</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;textureCoordinates&quot;</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test_bases&quot;</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment"># detachable members are just added to an internal set by name</span>
DETACHABLE <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;detach_this&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;origin&quot;</span><span class="token punctuation">}</span>

<span class="token comment"># you can pass a chunkables dict and a detachables as keyword arguments when writing your class</span>
<span class="token keyword">class</span> <span class="token class-name">FakeMesh</span><span class="token punctuation">(</span>Base<span class="token punctuation">,</span> chunkable<span class="token operator">=</span>CHUNKABLE_PROPS<span class="token punctuation">,</span> detachable<span class="token operator">=</span>DETACHABLE<span class="token punctuation">)</span><span class="token punctuation">:</span>
    vertices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    faces<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    colors<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    textureCoordinates<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    test_bases<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Base<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    detach_this<span class="token punctuation">:</span> Base <span class="token operator">=</span> <span class="token boolean">None</span>
    _origin<span class="token punctuation">:</span> Point <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token comment"># properties are also picked up and serialised as you'd expect</span>
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">origin</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_origin

    <span class="token decorator annotation punctuation">@origin<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">origin</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">:</span> Point<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_origin <span class="token operator">=</span> value

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="serialization"><a href="#serialization" class="header-anchor">#</a> Serialization</h4> <p>The <code>BaseObjectSerializer</code> is what's used behind the scenes in the <code>operations</code> for decomposing and serializing <code>Base</code> objects so they can be sent / received to the server. You probably won't ever need to use it directly. However, if you want you can use it to get the id (hash) and a serializable object representation of the decomposed <code>Base</code>. You can learn more about the Speckle <code>Base</code> object <a href="/dev/base">here</a> and the decomposition API <a href="/dev/decomposition">here</a>.</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>objects <span class="token keyword">import</span> Base
<span class="token keyword">from</span> specklepy<span class="token punctuation">.</span>serialization<span class="token punctuation">.</span>base_object_serializer <span class="token keyword">import</span> BaseObjectSerializer

detached_base <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token punctuation">)</span>
detached_base<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;a detached base&quot;</span>

base_obj <span class="token operator">=</span> Base<span class="token punctuation">(</span><span class="token punctuation">)</span>
base_obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;my base&quot;</span>
base_obj<span class="token punctuation">[</span><span class="token string">&quot;@nested&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> detached_base

serializer <span class="token operator">=</span> BaseObjectSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">hash</span><span class="token punctuation">,</span> obj_dict <span class="token operator">=</span> serializer<span class="token punctuation">.</span>traverse_base<span class="token punctuation">(</span>base_obj<span class="token punctuation">)</span>

<span class="token builtin">hash</span><span class="token punctuation">,</span> serialized <span class="token operator">=</span> serializer<span class="token punctuation">.</span>write_json<span class="token punctuation">(</span>base_obj<span class="token punctuation">)</span>
deserialized <span class="token operator">=</span> serializer<span class="token punctuation">.</span>read_json<span class="token punctuation">(</span>serialized<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/specklesystems/speckle-docs/edit/main/dev/py-examples.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/16/2021, 11:18:11 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev/python.html" class="prev">
        Introduction
      </a></span> <span class="next"><a href="/dev/py-sample.html">
        Tutorial: Simple Dashboard
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.15b1a046.js" defer></script><script src="/assets/js/4.567b9940.js" defer></script><script src="/assets/js/39.d0644e5c.js" defer></script>
  </body>
</html>
